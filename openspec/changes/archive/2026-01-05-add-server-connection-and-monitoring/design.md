## Context
用户需要能够连接到已保存的服务器并查看服务器状态。这需要：
1. 建立并保持 SSH 连接
2. 通过 SSH 执行命令获取服务器信息
3. 实时或定期更新服务器状态

## Goals / Non-Goals
- **Goals:**
  - 支持从服务器列表连接到服务器
  - 显示服务器的 CPU、内存、磁盘等基本信息
  - 连接失败时显示错误信息
  - 支持断开连接
   - 服务器状态自动刷新，刷新间隔在主界面通过设置界面进行设置，默认为3s刷新一次

- **Non-Goals:**
  - 终端执行命令功能（后续实现）
  - 服务器状态的历史记录
  - 多个服务器同时连接
 

## Decisions
- **Decision: 使用 JSch Session 保持连接**
  - 理由：JSch 已经用于 SSH 认证，可以复用 Session 对象来执行命令
  - 替代方案：每次查询都重新连接（性能较差，但实现简单）
  - 选择：保持连接，在监控界面关闭时断开

- **Decision: 通过 SSH 命令获取服务器信息**
  - CPU 信息：使用 `top` 或 `/proc/cpuinfo` 和 `/proc/stat`
  - 内存信息：使用 `free -h` 或 `/proc/meminfo`
  - 磁盘信息：使用 `df -h`
  - 理由：这些是 Linux 系统标准命令，兼容性好

- **Decision: 服务器状态数据模型**
  - 创建 `ServerStatus` 数据类，包含 CPU、内存、磁盘等信息
  - 使用 Kotlin data class，便于序列化和显示
  - 理由：结构清晰，易于扩展

- **Decision: 连接状态管理**
  - 在 ViewModel 中管理 SSH Session
  - 连接成功后保存 Session，用于后续命令执行
  - 界面关闭时自动断开连接
  - 理由：符合 Android 生命周期管理，避免资源泄漏

## Risks / Trade-offs
- **风险：SSH 连接可能断开**
  - 缓解：检测连接状态，断开时提示用户重新连接
  - 缓解：实现连接重试机制

- **风险：命令执行可能失败**
  - 缓解：捕获异常，显示友好的错误信息
  - 缓解：提供手动刷新按钮

- **性能考虑：**
  - 首次实现不自动刷新，避免频繁执行命令
  - 后续可以添加定时刷新功能

## Migration Plan
- 无需迁移，这是新功能
- 不影响现有的服务器管理功能

## Open Questions
- 是否需要支持 Windows 服务器的状态获取？（当前假设为 Linux）
- 服务器状态信息的更新频率？（首次实现为手动刷新）

