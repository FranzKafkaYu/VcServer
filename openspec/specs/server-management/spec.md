# server-management Specification

## Purpose
TBD - created by archiving change add-ssh-login-and-persistence. Update Purpose after archive.
## Requirements
### Requirement: 服务器添加
系统 SHALL 允许用户添加新的服务器配置信息。

#### Scenario: 添加服务器成功
- **WHEN** 用户输入有效的服务器信息（名称、主机、端口、用户名、认证信息）
- **AND** 用户选择认证方式（密码或密钥）
- **AND** 用户点击保存按钮
- **THEN** 系统验证输入信息格式
- **AND THEN** 系统加密存储敏感信息（密码或密钥）
- **AND THEN** 系统将服务器信息保存到本地数据库
- **AND THEN** 系统显示成功提示并返回服务器列表

#### Scenario: 密码可见性切换
- **WHEN** 用户选择密码认证方式
- **AND** 用户在密码输入字段中输入密码
- **AND** 用户点击密码字段右侧的眼睛图标按钮
- **THEN** 系统切换密码的显示状态（可见/不可见）
- **AND THEN** 眼睛图标状态相应更新（睁眼表示可见，闭眼表示不可见）
- **AND THEN** 用户可以再次点击眼睛图标切换回之前的显示状态

#### Scenario: 密钥密码可见性切换
- **WHEN** 用户选择密钥认证方式
- **AND** 用户输入带密码保护的私钥
- **AND** 用户在密钥密码输入字段中输入密码
- **AND** 用户点击密钥密码字段右侧的眼睛图标按钮
- **THEN** 系统切换密钥密码的显示状态（可见/不可见）
- **AND THEN** 眼睛图标状态相应更新

#### Scenario: 添加服务器 - 输入验证失败
- **WHEN** 用户输入无效的服务器信息（例如：空的主机名、无效的端口号）
- **AND** 用户点击保存按钮
- **THEN** 系统显示相应的错误提示信息
- **AND THEN** 系统不保存服务器信息

#### Scenario: 添加服务器 - 连接测试失败
- **WHEN** 用户输入服务器信息
- **AND** 用户点击连接测试按钮
- **AND** 服务器连接失败（网络错误、认证失败等）
- **THEN** 系统显示连接失败的错误信息
- **AND THEN** 系统不保存服务器信息

### Requirement: 服务器列表查看
系统 SHALL 允许用户查看已保存的服务器列表，并提供连接功能。

#### Scenario: 查看服务器列表
- **WHEN** 用户打开应用主界面
- **THEN** 系统从本地数据库加载服务器列表
- **AND THEN** 系统显示所有已保存的服务器（显示服务器名称、主机、端口等信息）
- **AND THEN** 如果列表为空，系统显示空状态提示

#### Scenario: 连接服务器
- **WHEN** 用户在服务器列表中点击某个服务器的连接按钮
- **THEN** 系统使用保存的服务器配置信息建立 SSH 连接
- **AND THEN** 系统显示连接进度指示器
- **AND THEN** 连接成功后，系统导航到服务器监控界面
- **AND THEN** 连接失败时，系统显示错误提示信息

#### Scenario: 连接服务器 - 认证失败
- **WHEN** 用户点击连接按钮
- **AND** 服务器的认证信息无效（密码错误、密钥不匹配等）
- **THEN** 系统检测到认证失败
- **AND THEN** 系统显示认证失败的错误信息
- **AND THEN** 系统不导航到监控界面

#### Scenario: 连接服务器 - 网络错误
- **WHEN** 用户点击连接按钮
- **AND** 网络连接失败（主机不可达、端口关闭等）
- **THEN** 系统检测到网络错误
- **AND THEN** 系统显示网络错误信息
- **AND THEN** 系统不导航到监控界面

### Requirement: 服务器信息更新
系统 SHALL 允许用户更新已保存的服务器配置信息。

#### Scenario: 更新服务器信息成功
- **WHEN** 用户在服务器列表中长按某个服务器项
- **AND** 用户选择编辑选项
- **AND** 用户修改服务器信息
- **AND** 用户点击保存按钮
- **THEN** 系统验证输入信息格式
- **AND THEN** 系统更新本地数据库中的服务器信息
- **AND THEN** 系统显示成功提示并刷新服务器列表

### Requirement: 服务器删除
系统 SHALL 允许用户删除已保存的服务器配置。

#### Scenario: 删除服务器成功
- **WHEN** 用户在服务器列表中长按某个服务器项
- **AND** 用户选择删除选项
- **AND** 用户确认删除操作
- **THEN** 系统从本地数据库删除服务器信息
- **AND THEN** 系统从列表中移除该服务器
- **AND THEN** 系统显示删除成功提示

#### Scenario: 删除服务器 - 用户取消
- **WHEN** 用户在服务器列表中长按某个服务器项
- **AND** 用户选择删除选项
- **AND** 用户取消删除操作
- **THEN** 系统不删除服务器信息
- **AND THEN** 系统保持服务器列表不变

